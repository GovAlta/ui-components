import { useState } from 'react';
import { Meta, Story } from '@storybook/addon-docs';
import {
  SupportInfo,
  Tabs,
  Tab,
  CodeSnippet,
} from '@abgov/shared/storybook-common';
import { GoATextArea } from '@abgov/react-components';

<Meta title="Components/Text area" component={GoATextArea} />

# Text area

### Text inputs let users enter and input text. Text areas can be used when trying to collect more information than may fit in a traditional form field.

[Figma design documentation](https://www.figma.com/file/3pb2IK8s2QUqWieH79KdN7/Components---DIO-DS?node-id=458%3A16042)

export const noop = () => {
  /* noop */
};

#### Basic

<Story name="Basic">
  <GoATextArea
    name="comment"
    onChange={(name, value) => {
      console.log('changed', name, value);
    }}
    value="Initial value"
  />
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea id="comment" name="comment" value="Initial value" />
    `}
    />
    <CodeSnippet
      lang="js"
      code={`
      var textarea = document.getElementById('comment');
      textarea.addEventListener('_change', function(e) {
        console.log('changed', e.detail.name, e.detail.value);
      });
    `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea name="comment" (_change)="onChange()" value="Initial value" />
    `}
    />
    <CodeSnippet
      lang="ts"
      code={`
      export class SomeComponent {
        onChange(e) {
          console.log('changed', e.detail.name, e.detail.value);
        }
      }
    `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="tsx"
      code={`
      export function MyPage() {
        const [value, setValue] = useState<string>('Initial value');
        return (
          <GoATextArea
            value={value}
            name="comment"
            onChange={(name, value) => {
              setValue(value);
              console.log('changed', name, value);
            }}
          />
        )
      }
    `}
    />
  </Tab>
</Tabs>

### Character count

export const CharCountTemplate = () => {
  const [value, setValue] = useState('');
  return (
    <GoATextArea
      name="comment"
      value={value}
      showCounter={true}
      onChange={(name, value) => setValue(value)}
    />
  );
};

<Story name="Character count">{CharCountTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-textarea name="firstname" showcounter="true" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-textarea name="firstname" showcounter="true"></goa-textarea>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`
      const [value, setValue] = useState('');
      return (
        <GoATextArea
          name="firstname"
          value={value}
          showCounter={true}
          onChange={(name, value) => setValue(value)}
        />
      )
    `}
      lang="tsx"
    />
  </Tab>
</Tabs>

### Character count with limit

export const CharCountWithLimitTemplate = () => {
  const [value, setValue] = useState('');
  return (
    <GoATextArea
      name="comment"
      value={value}
      showCounter={true}
      maxCharCount={20}
      onChange={(name, value) => setValue(value)}
    />
  );
};

<Story name="Character count with limit">
  {CharCountWithLimitTemplate.bind({})}
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-textarea name="firstname" showcounter="true" maxcharcount="20" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-textarea name="firstname" showcounter="true" maxcharcount="20"></goa-textarea>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`
      const [value, setValue] = useState('');
      return (
        <GoATextArea
          name="firstname"
          value={value}
          showCounter={true}
          maxCharCount={20}
          onChange={(name, value) => setValue(value)}
        />
      )
    `}
      lang="tsx"
    />
  </Tab>
</Tabs>

#### Disabled

<Story name="Disabled">
  <GoATextArea name="comment" disabled={true} onChange={noop} />
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea name="comment" disabled />
    `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea name="comment" disabled />
    `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="tsx"
      code={`
      <GoATextArea name="comment" disabled={true} />
    `}
    />
  </Tab>
</Tabs>

#### Placeholder

<Story name="Placeholder">
  <GoATextArea
    name="comment"
    placeholder="Tell us what you think.."
    onChange={noop}
  />
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea placeholder="Tell us what you think.." name="comment" />
    `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea placeholder="Tell us what you think.." name="comment" />
    `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="tsx"
      code={`
      <GoATextArea placeholder="Tell us what you think.." name="comment" onChange={noop}  />
    `}
    />
  </Tab>
</Tabs>

#### Rows

<Story name="Rows">
  <GoATextArea name="comment" rows={4} onChange={noop} />
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea rows="4" name="comment" />
    `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea rows="4" name="comment" />
    `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="tsx"
      code={`
      <GoATextArea rows={4} name="comment" onChange={noop}  />
    `}
    />
  </Tab>
</Tabs>

#### Error state

<Story name="Error State">
  <GoATextArea name="comment" error={true} onChange={noop} />
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea error name="comment" />
    `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
      <goa-textarea error name="comment" />
    `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="tsx"
      code={`
      <GoATextArea error={true} name="comment" />
    `}
    />
  </Tab>
</Tabs>

### Width 

<Story name="Width">
  <GoATextArea name="comment" width="100%" onChange={noop} placeholder="Can units of %, ch, px, etc" />
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-textarea name="firstname" width="100%" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-textarea name="firstname" width="100%"></goa-input>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`return <GoATextArea name="comment" width="100%" onChange={noop} /> `}
      lang="tsx"
    />
  </Tab>
</Tabs>

---

<SupportInfo />
