import {
  GoAInput,
  GoAInputText,
  GoAInputPassword,
  GoAInputDate,
  GoAInputTime,
  GoAInputDateTime,
  GoAInputEmail,
  GoAInputUrl,
  GoAInputTel,
  GoAInputFile,
  GoAInputMonth,
  GoAInputNumber,
  GoAInputRange,
  GoAFormItem,
} from '@abgov/react-components';
import { useState } from 'react';
import {
  SupportInfo,
  Tabs,
  Tab,
  Note,
  Block,
  Do,
  Dont,
  StateDisplay,
  CodeSnippet,
} from '@abgov/shared/storybook-common';
import {
  Meta,
  Preview,
  Story,
  ArgsTable,
  Description,
} from '@storybook/addon-docs';

<Meta title="Components/Inputs" component={GoAInput} />

# Input

[Figma design component](https://www.figma.com/file/3pb2IK8s2QUqWieH79KdN7/DIO-DS---Components?node-id=133%3A186)

export const noop = () => {};

### Basic

export const InputTemplate = () => {
  const [value, setValue] = useState('');
  return (
    <>
      <GoAInputText
        name="firstname"
        value={value}
        onChange={(name, value) => {
          setValue(value);
          console.log(name, value);
        }}
      />
    </>
  );
};

<Story name="Basic">{InputTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      lang="html"
      code={`
      <goa-input id="foo" name="foo" />
    `}
    />
    <CodeSnippet
      lang="js"
      code={`
      document.querySelector('#foo').addEventListener('_change', (e) => {
        console.log(e.detail.name, e.detail.value);
      });
    `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
      <goa-input name="foo" (_change)="onChange()"></goa-input>
    `}
    />
    <CodeSnippet
      lang="ts"
      code={`
      export class SomeComponent {
        onChange(e) {
          console.log(e.detail.name, e.detail.value);
        }
      }
    `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="jsx"
      code={`
      const [value, setValue] = useState('');
      return (
        <>
          <GoAInputText
            name="firstname"
            value={value}
            onChange={(name, value) => {
              setValue(value);
              console.log(name, value);
            }}
          />
        </>
      );
    `}
    />
  </Tab>
</Tabs>

### Icons

export const IconInputTemplate = () => (
  <>
    <div style={{ display: 'flex', gap: '4px', flexDirection: 'column' }}>
      <GoAInputText name="foo" leadingIcon="finger-print" onChange={noop} />
      <GoAInputText name="foo" trailingIcon="finger-print" onChange={noop} />
    </div>
  </>
);

<Story name="Icons">{IconInputTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-input leadingicon="finger-print" />`}
      lang="html"
    />
    <CodeSnippet
      code={`<goa-input trailingicon="finger-print" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-input leadingicon="finger-print"></goa-input>`}
      lang="html"
    />
    <CodeSnippet
      code={`<goa-input trailingicon="finger-print"></goa-input>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet code={`<GoAInput leadingIcon="finger-print" />`} lang="jsx" />
    <CodeSnippet code={`<GoAInput trailingIcon="finger-print" />`} lang="jsx" />
  </Tab>
</Tabs>

### Icon buttons

export const IconButtonInputTemplate = () => (
  <>
    <GoAInputText
      name="foo"
      trailingIcon="finger-print"
      onTrailingIconClick={() => alert('clicked')}
      onChange={noop}
    />
  </>
);

<Story name="Icon Buttons">{IconButtonInputTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-input id="secret" trailingicon="finger-print" />`}
      lang="html"
    />
    <CodeSnippet
      lang="js"
      code={`
        var el = document.getElementById('secret')
        el.addEventListener('_trailingIconClick', clickHandler);
        // to later remove the event listener
        el.removeEventListener('_trailingIconClick', clickHandler);
      `}
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      lang="html"
      code={`
        <goa-input
          id="secret"
          handletrailingiconclick="true"
          (_trailingIconClick)="handleClick()"
          trailingicon="finger-print"
        />
      `}
    />
    <CodeSnippet
      lang="js"
      code={`
        export class SomeComponent {
          handleClick() {
            console.log('handleClick');
          }
        }
      `}
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      lang="jsx"
      code={`
        <GoAInputText
          name="secret"
          trailingIcon="finger-print"
          onTrailingIconClick={() => alert('clicked')}
        `}
    />
  </Tab>
</Tabs>

### Disabled

export const DisabledInputTemplate = () => (
  <>
    <GoAInput name="foo" disabled={true} value="Disabled" onChange={noop} />
  </>
);

<Story name="Disabled">{DisabledInputTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-input disabled="true" placeholder="Find by name" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-input disabled="true" placeholder="Find by name"></goa-input>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`<GoAInput disabled={true} placeholder="Find by name" />`}
      lang="jsx"
    />
  </Tab>
</Tabs>

### Error state

export const ErrorInputTemplate = () => (
  <>
    <GoAInput name="foo" error={true} value="Some value" onChange={noop} />
  </>
);

<Story name="Error">{ErrorInputTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet code={`<goa-input error  />`} lang="html" />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet code={`<goa-input error></goa-input>`} lang="html" />
  </Tab>
  <Tab label="React">
    <CodeSnippet code={`<GoAInput name="foo" error={true} />`} lang="jsx" />
  </Tab>
</Tabs>

### Focus

export const FocusInputTemplate = () => (
  <>
    <GoAInput name="foo" focused={true} value="Some value" onChange={noop} />
  </>
);

<Story name="Focus">{FocusInputTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet code={`<goa-input />`} lang="html" />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet code={`<goa-input ></goa-input>`} lang="html" />
  </Tab>
  <Tab label="React">
    <CodeSnippet code={`<GoAInput name="foo" />`} lang="jsx" />
  </Tab>
</Tabs>

### Character count

export const CharCountTemplate = () => {
  const [value, setValue] = useState('');
  return (
    <GoAInput
      name="firstname"
      value={value}
      showCounter={true}
      onChange={(name, value) => setValue(value)}
    />
  );
};

<Story name="Character count">{CharCountTemplate.bind({})}</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-input name="firstname" showcounter="true" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-input name="firstname" showcounter="true"></goa-input>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`
      const [value, setValue] = useState('');
      return (
        <GoAInput
          name="firstname"
          value={value}
          showCounter={true}
          onChange={(name, value) => setValue(value)}
        />
      )
    `}
      lang="tsx"
    />
  </Tab>
</Tabs>

### Character count with limit

export const CharCountWithLimitTemplate = () => {
  const [value, setValue] = useState('');
  return (
    <GoAInput
      name="firstname"
      value={value}
      showCounter={true}
      maxCharCount={20}
      onChange={(name, value) => setValue(value)}
    />
  );
};

<Story name="Character count with limit">
  {CharCountWithLimitTemplate.bind({})}
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`<goa-input name="firstname" showcounter="true" maxcharcount="20" />`}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`<goa-input name="firstname" showcounter="true" maxcharcount="20"></goa-input>`}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`
      const [value, setValue] = useState('');
      return (
        <GoAInput
          name="firstname"
          value={value}
          showCounter={true}
          maxCharCount={20}
          onChange={(name, value) => setValue(value)}
        />
      )
    `}
      lang="tsx"
    />
  </Tab>
</Tabs>

### Width 

export const WidthTemplate = ({width}) => {
  return (
    <>
    <GoAInput
      name="firstname"
      placeholder="width allows for %, ch, px, etc"
      onChange={() => {}}
    />
    <br />
    <GoAInput
      name="firstname"
      width="100%"
      placeholder="100%"
      onChange={() => {}}
    />
    <br />
    <GoAInput
      name="firstname"
      width="50%"
      placeholder="50%"
      onChange={() => {}}
    />
    <br />
    <GoAInput
      name="firstname"
      width="20ch"
      placeholder="20ch"
      onChange={() => {}}
    />
    </>
  );
};

<Story name="Width" args={{ width: "80%"}}>
  {WidthTemplate.bind({})}
</Story>

<Tabs>
  <Tab label="Web Component">
    <CodeSnippet
      code={`
        <goa-input name="firstname" />
        <goa-input name="firstname" width="100%" />
        <goa-input name="firstname" width="50%" />
        <goa-input name="firstname" width="20ch" />
      `}
      lang="html"
    />
  </Tab>
  <Tab label="Angular">
    <CodeSnippet
      code={`
        <goa-input name="firstname"></goa-input>
        <goa-input name="firstname" width="100%"></goa-input>
        <goa-input name="firstname" width="50%"></goa-input>
        <goa-input name="firstname" width="20ch"></goa-input>
      `}
      lang="html"
    />
  </Tab>
  <Tab label="React">
    <CodeSnippet
      code={`
        <GoAInput name="firstname" onChange={() => {}} />
        <GoAInput name="firstname" width="100%" onChange={() => {}} />
        <GoAInput name="firstname" width="50%" onChange={() => {}} />
        <GoAInput name="firstname" width="20ch" onChange={() => {}} />
      `}
      lang="tsx"
    />
  </Tab>
</Tabs>

---

<SupportInfo />
