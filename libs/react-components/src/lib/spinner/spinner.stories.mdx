import { GoASpinner } from './spinner';
import { action } from '@storybook/addon-actions';
import { DoDont } from '@abgov/shared/storybook-common';
import { useState, useEffect } from 'react';

import {
  Meta,
  Preview,
  Story,
  ArgsTable,
  Description,
} from '@storybook/addon-docs';

<Meta
  title="React/Web Components/Spinner"
  component={GoASpinner}
  argTypes={{
    type: {
      control: {
        type: 'select',
        options: [ "infinite", "progress" ]
      },
    },
    size: {
      control: {
        type: 'select',
        options: [ "small", "medium", "large", "xlarge" ],
      },
    },
  }}
/>

# GoASpinner

A skeleton provides visual feedback to users while a content heavy page or element is loading.

## Variations

export const Template = (args) => {
  const [progress, setProgress] = useState(0);
  const updateProgress = () => {
    return setInterval(() => {
      if (args.type === 'progress') {
        setProgress(progress + 10);
      }
    }, 1000);
  };
  useEffect(() => {
    const handle = updateProgress();
    return () => {
      clearInterval(handle);
    }
  }, [args.type, progress, setProgress]);
  return <GoASpinner {...args} progress={progress} />
}

export const InvertedTemplate = (args) => (
  <div style={{backgroundColor: 'var(--color-blue)', padding: '1rem', display: 'inline-block'}}>
    <GoASpinner {...args} />
  </div>
);

<Canvas>
  <Story
    name="Progress"
    args={{
      size: "large",
      type: "progress",
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="Infinite (inverted)"
    args={{
      size: "large",
      invert: true,
      type: "infinite",
    }}
  >
    {InvertedTemplate.bind({})}
  </Story>
</Canvas>

```html
<GoASpinner type="progress" size="medium"></GoASpinner>
```

## Usage guidelines

<DoDont
  dos={
    'Show multiple elements within a larger component as individual information containers'
  }
  donts={
    'Compile several elements that may have different loading durations into one container'
  }
  />

<DoDont
  dos={
    'Include only the most important information containers that make the component recognizable'
  }
  donts={
    'Show every single element as information containers in your skeleton load'
  }
/>

<DoDont
  dos={'Format bones so that they are conducive to a gradual content loading'}
  donts={'Oversimplify the component so that it is not recognizable'}
/>
