import { GoAPageLoader } from './page-loader';
import { action } from '@storybook/addon-actions';
import { DoDont } from '@abgov/shared/storybook-common';
import { useState, useEffect } from 'react';

import {
  Meta,
  Preview,
  Story,
  ArgsTable,
  Description,
} from '@storybook/addon-docs';

<Meta
  title="React/PageLoader"
  component={GoAPageLoader}
  argTypes={{
    type: {
      control: {
        type: 'select',
        options: ['progress', 'infinite'],
      },
    },
    message: {
      control: {
        type: 'text',
      },
    },
    variant: {
      control: {
        type: 'select',
        options: ['fullscreen', 'inline'],
      },
    },
  }}
/>

# GoAPageLoader

A page loading indicator which will prevent user input.

## Overview

export const Template = (args) => {
  const [progress, setProgress] = useState(0);
  const updateProgress = () => {
    return setInterval(() => {
      if (args.type === 'progress') {
        setProgress(progress + 10);
      }
    }, 1000);
  };
  useEffect(() => {
    const handle = updateProgress();
    return () => {
      clearInterval(handle);
    }
  }, [args.type, progress, setProgress]);
  return <GoAPageLoader {...args} progress={progress} />
}

#### Basic

<Canvas>
  <Story name="Fullscreen Infinite">{Template.bind({})}</Story>
</Canvas>

## Examples

```html
<GoAPageLoader
  visible="{true}"
  type="'infinite' | 'progress'"
  message="Loading..."
/>
```

## Properties

<Description of={GoAPageLoader} />
<ArgsTable of={GoAPageLoader} />

## Usage guidelines

### PageLoader content

A page loader must contain a label

<DoDont
  dos={'Keep content short and concise'}
  donts={"Place a full sentence in the indicator's label"}
/>
