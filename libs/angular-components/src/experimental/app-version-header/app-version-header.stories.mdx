import { GoAAppVersionHeaderComponent } from './app-version-header.component';

import {
  Meta,
  Canvas,
  Story,
  ArgsTable,
  Description,
} from '@storybook/addon-docs/blocks';
import { moduleMetadata } from '@storybook/angular';
import { action } from '@storybook/addon-actions';

<Meta
  title="Experimental/Components/AppVersionHeader"
  component={GoAAppVersionHeaderComponent}
  argTypes={{
    isProdEnvironment: {
      control: 'boolean',
      table: {
        //tracked bug in storybook https://github.com/storybookjs/storybook/issues/11983, need table to override display
        defaultValue: { summary: false },
        type: { summary: 'boolean' },
      },
    },
    environment: { control: 'text' },
    version: { control: 'text' },
  }}
  decorators={[
    moduleMetadata({ declarations: [GoAAppVersionHeaderComponent] }),
  ]}
/>

# App Version Header

The AppVersionHeader component aims to implement the 'AppVersionHeader' specifications on the Alberta Design System.
The App Version Header is displayed in UAT / Test / Syst etc. environments to display an applicationâ€™s version number and environment label. This header is dismissible to allow it to be hidden during a demo or usability test.

**Contributors:** ACO Team

**Peer Dependencies:**

- None

**TODOs:**

- [ ] Design in design system XD and referenced by Story.
- [ ] Component available in Angular, React, and Vue libraries.
- [ ] Add component style to goa-core.scss and remove include in app-version-header.component.scss
- [ ] Make the close button a link button

<Canvas>
  <Story
    name="AppVersionHeader"
    height={100}
    args={{
      isProdEnvironment: false,
      environment: 'test',
      version: '1.0',
    }}
    parameters={{
      design: {},
    }}
  >
    {(args) => {
      args.closed = function (value) {
        action('app version header closed')(value);
      };
      return {
        template: `<goa-app-version-header [isProdEnvironment]="isProdEnvironment" [environment]="environment" [version]="version" (closed)="closed($event)"></goa-app-version-header>`,
        props: args,
      };
    }}
  </Story>
</Canvas>
